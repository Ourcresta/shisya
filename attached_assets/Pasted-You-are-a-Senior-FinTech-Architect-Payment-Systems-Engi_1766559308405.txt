You are a Senior FinTech Architect,
Payment Systems Engineer,
and EdTech Product Designer.

Your task is to BUILD a COMPLETE
â€œBuy Credits (â‚¹â‚¹â‚¹)â€ system
for the SHISHYA Student Portal.

This system converts real money (INR)
into platform Points (Credits)
used to enroll in courses.

--------------------------------------------------
ğŸ¯ PRODUCT GOAL
--------------------------------------------------

â€¢ Simple recharge like mobile top-up
â€¢ Clear INR â†’ Points conversion
â€¢ Trust-building payment flow
â€¢ Wallet updates instantly after payment

--------------------------------------------------
ğŸ“ ROUTING (LOCK THIS)
--------------------------------------------------

Primary Routes:
â€¢ /shishya/wallet
â€¢ /shishya/wallet/buy

--------------------------------------------------
ğŸ§± BUY CREDITS PAGE STRUCTURE
--------------------------------------------------

SECTION 1ï¸âƒ£ â€” Header

Title:
  â€œBuy Learning Creditsâ€

Subtitle:
  â€œRecharge your wallet to unlock premium coursesâ€

--------------------------------------------------
SECTION 2ï¸âƒ£ â€” Credit Packs (Predefined)

Display cards with pricing:

ğŸª™ Starter Pack  
â€¢ â‚¹500 â†’ 500 Points  
â€¢ Best for beginners

ğŸª™ Pro Pack  
â€¢ â‚¹1000 â†’ 1100 Points  
â€¢ +10% bonus

ğŸª™ Power Pack  
â€¢ â‚¹2000 â†’ 2300 Points  
â€¢ +15% bonus (Recommended)

Each card shows:
â€¢ INR price
â€¢ Points received
â€¢ Bonus badge
â€¢ [ Buy Now ] CTA

--------------------------------------------------
SECTION 3ï¸âƒ£ â€” Custom Recharge (Optional)

â€¢ Input INR amount
â€¢ Show live conversion:
  â‚¹X â†’ Y Points
â€¢ Minimum: â‚¹500
â€¢ Conversion rule:
  1 INR = 1 Point

--------------------------------------------------
SECTION 4ï¸âƒ£ â€” Payment Gateway Integration

Use Razorpay (India-first, production-ready)

Flow:
1. User selects pack
2. Clicks Buy Now
3. Razorpay Checkout opens
4. Payment success callback
5. Points credited instantly
6. Wallet updated
7. Transaction logged

--------------------------------------------------
ğŸª™ WALLET UPDATE LOGIC
--------------------------------------------------

On successful payment:
â€¢ Add CREDIT transaction
â€¢ Update pointsBalance
â€¢ Mark source = "Recharge"
â€¢ Store paymentId, orderId

--------------------------------------------------
ğŸ“Š TRANSACTION HISTORY
--------------------------------------------------

Wallet history must show:
â€¢ Date
â€¢ â€œRecharge via Razorpayâ€
â€¢ +Points credited
â€¢ Payment reference ID

--------------------------------------------------
ğŸ” SECURITY & VALIDATION
--------------------------------------------------

â€¢ Never trust frontend amount
â€¢ Verify payment signature server-side
â€¢ Credit points ONLY after verification
â€¢ Prevent replay attacks
â€¢ Handle duplicate callbacks safely

--------------------------------------------------
ğŸ§  DATA MODELS
--------------------------------------------------

WalletTransaction:
â€¢ id
â€¢ userId
â€¢ type: CREDIT
â€¢ source: Recharge
â€¢ points
â€¢ inrAmount
â€¢ paymentGateway
â€¢ paymentId
â€¢ status
â€¢ createdAt

--------------------------------------------------
âš™ï¸ BACKEND APIs
--------------------------------------------------

POST /wallet/create-order
POST /wallet/verify-payment
GET  /wallet
GET  /wallet/transactions

--------------------------------------------------
ğŸ¨ UX PRINCIPLES
--------------------------------------------------

â€¢ FinTech-like clarity
â€¢ No dark patterns
â€¢ Always show balance before & after
â€¢ Clear success confirmation
â€¢ Friendly failure messages

--------------------------------------------------
ğŸ§ª TEST CASES (MANDATORY)
--------------------------------------------------

âœ” Successful payment credits points
âœ” Wallet balance updates instantly
âœ” Failed payment credits NOTHING
âœ” Duplicate callbacks handled safely
âœ” Transaction history accurate
âœ” Mobile checkout works
âœ” Refresh does NOT duplicate credits

--------------------------------------------------
ğŸš« DO NOT
--------------------------------------------------

âœ— Do NOT auto-credit without verification
âœ— Do NOT allow negative balances
âœ— Do NOT hide INR â†’ Points mapping
âœ— Do NOT allow admin-less crediting

--------------------------------------------------
âœ… PRODUCT PHILOSOPHY
--------------------------------------------------

Points must feel like MONEY.
Payments must feel SAFE.
Learning must feel WORTH IT.
